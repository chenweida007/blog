## 公共组件库

project/ro/ro/js





### 1. 获取cookie

project/ro/ro/js/lib/base/cookie.js

```javascript
if (document.cookie && document.cookie != '') {
    var cookies = document.cookie.split(';');
    for (var i = 0; i < cookies.length; i++) {
        var cookie = jQuery.trim(cookies[i]);
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) == (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
        }
    }
}
```

project/ro/ro/m

	audio calendar cutpicture  dialog drag
	dropdown go lazyload muplayer page
	qrcode router select selection selector
	tips upload url validation
	
		
组件，算了不看

	calendar
	dialog
	page
	validation

project/src/ro/m/
	
	有很多重合的，不看
	

### 2.错误上报
	
project/src/ro/m/errorreport/js/1.0.1/errorreport.js 

	
	window.onerror = function(errorMessage, scriptURI, lineNumber,columnNumber,errorObj) {
		try{
			sendErrorReport(errorMessage, scriptURI, lineNumber, columnNumber, errorObj);
		}catch(e){}
	};
	
	
	var sendErrorReport = function (errorMessage, scriptURI, lineNumber,columnNumber,errorObj){
			var browserInfo = getBrowserInfo(browser);
			var url = $$c && $$c.jsErrorUrl ? $$c.jsErrorUrl : ($Le && $Le.Config && $Le.Config.jsErrorUrl ? $Le.Config.jsErrorUrl : 'http://beta.tmp.scloud.letv.cn/jsstatistics/js'); 
			ajax({
				url: url,
				type: 'post',
				data: {
				'browser_name': browserInfo && browserInfo.name ? browserInfo.name:""
				,'browser_kernel': browserInfo && browserInfo.kernel ? browserInfo.kernel:""
				,'browser_version': browserInfo && browserInfo.version ? browserInfo.version:""
				,'error_message': errorMessage
				,'script_url': scriptURI
				,'line_number': lineNumber
				,'column_number': columnNumber
				,'error_obj': errorObj
				,'page_url': window.location.href
				,'user_id': $$c && $$c.userId ? $$c.userId : ($Le && $Le.Config && $Le.Config.userId ? $Le.Config.userId : '') 
				,'page_source': document.referrer
				,'project': ''
				},
				success:function(){},
				fail: function(){}
			});
	}
